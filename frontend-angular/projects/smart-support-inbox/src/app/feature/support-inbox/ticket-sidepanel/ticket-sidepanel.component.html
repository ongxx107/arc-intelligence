<div class="title-bar">
  <div class="title">{{ ticket().subject }}</div>
  <ngt-button matIcon="close" shape="square" styling="tertiary" (ngtClick)="close.emit()" />
</div>

<div class="body">
  <div class="kv">
    <div class="k">From</div>
    <div class="v">{{ value(ticket().from_email) }}</div>
  </div>
  <div class="kv">
    <div class="k">Category</div>
    <div class="v">{{ value(ticket().category) }}</div>
  </div>
  <div class="kv">
    <div class="k">Priority</div>
    <div class="v">{{ value(ticket().priority) }}</div>
  </div>
  <div class="kv">
    <div class="k">Created</div>
    <div class="v">{{ value(ticket().created_at) }}</div>
  </div>

  <div class="section">
    <div class="k">Message</div>
    <div class="v pre">{{ value(ticket().message) }}</div>
  </div>

  <div class="section">
    <div class="k">Summary</div>
    <div class="v pre">{{ value(ticket().summary) }}</div>
  </div>

  <div class="section">
    <div class="k">Suggested reply</div>
    <div class="v pre">{{ value(ticket().suggested_reply) }}</div>
  </div>

  <div class="section">
    <div class="k">Feedback</div>
    <div class="v">
      @if (ticket().feedback_accepted === true) { <span class="pill ok">Accepted</span> }
      @if (ticket().feedback_accepted === false) { <span class="pill bad">Rejected</span> }
      @if (ticket().feedback_accepted === null) { <span class="pill neutral">No feedback yet</span> }
    </div>
  </div>

  <div class="section">
    <ngt-input-field
      [label]="'Comment (optional)'"
      [(value)]="comment"
      width="max"
      style="width: 100%" />
    @if (error()) {
      <div class="error">{{ error() }}</div>
    }
  </div>
</div>

<div class="button-bar">
  <div class="two">
    <ngt-button class="wide" styling="secondary" shape="long" [disabled]="submitting()" (ngtClick)="reject()">
      Reject
    </ngt-button>
    <ngt-button class="wide" styling="primary" shape="long" [disabled]="submitting()" (ngtClick)="accept()">
      Accept
    </ngt-button>
  </div>
</div>
